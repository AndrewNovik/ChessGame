<div class="chess-board">
  <div *ngFor="let row of chessBoardFigures; let x = index" class="row">
    <div
      style="position: relative"
      *ngFor="let cell of row; let y = index"
      class="square"
      [ngClass]="{
        'selected-cell': isCellSelected(x, y),
        'dark-cell': isCellDark(x, y),
        'light-cell': !isCellDark(x, y),
        'last-move': isCellPrevMove(x, y),
        'king-in-check': isKingChecked(x, y),
        'promotion-cell': isCellPromotionCell(x, y)
      }"
      (click)="move(x, y)"
    >
      <div [ngClass]="{ 'safe-cell': isCellSafeForSelectedFigure(x, y) }"></div>
      <img
        *ngIf="cell"
        [src]="figureImageSource[cell.figure]"
        [alt]="cell.figure"
        class="piece"
      />
    </div>
  </div>
</div>

<div *ngIf="isGameOver" class="">
  <span>{{ gameOverMessage }}</span>
</div>

<div *ngIf="isPromotionActive" class="promotion-dialog">
  <img
    *ngFor="let figure of availablePromotionFigureTypes()"
    [src]="figureImageSource[figure]"
    [alt]="figureImageSource[figure]"
    (click)="promoteFigure(figure)"
  />
  <span class="close-promotion-dialog" (click)="closePawnPromotion()">
    &times;
  </span>
</div>

<div>
  <h3>Ход - {{ playerColor === "White" ? "Белых" : "Черных" }}</h3>
</div>

<div>
  <h3>История ходов</h3>
  <div *ngFor="let move of recordedMoves">
    <span
      >{{
        (move.piece.color === "White" ? "W" : "B") +
          " " +
          move.prevX +
          " " +
          move.prevY
      }}
      на {{ move.currX + " " + move.currY }}</span
    >
  </div>
</div>
